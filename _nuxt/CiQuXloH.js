import{z as C,A as w,B as m,e as d,w as f,C as h,D as B,E as q,G as o,P as z,H as ee,I as te,J as ae,K as c,L as le,M as se,t as F,N as ne,O as oe,y as ie,Q as ue,R as re,S as X,g as I,n as k,f as E,d as N,U as L,F as A,V as Q,v as de,h as $,W as ce}from"./Cq7EYMb8.js";import{u as Y}from"./BbYIOedd.js";import{q as Z}from"./CP4acGBR.js";import{g as ve}from"./B54K_KEW.js";const fe=C({__name:"PaginationEllipsis",props:{asChild:{type:Boolean},as:{}},setup(t){const l=t;return w(),(e,s)=>(d(),m(o(z),q(l,{"data-type":"ellipsis"}),{default:f(()=>[h(e.$slots,"default",{},()=>[s[0]||(s[0]=B("â€¦"))])]),_:3},16))}}),[S,ge]=ee("PaginationRoot"),me=C({__name:"PaginationRoot",props:{page:{},defaultPage:{default:1},itemsPerPage:{},total:{default:0},siblingCount:{default:2},disabled:{type:Boolean},showEdges:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"nav"}},emits:["update:page"],setup(t,{emit:l}){const e=t,s=l,{siblingCount:n,disabled:a,showEdges:i}=te(e);w();const g=ae(e,"page",s,{defaultValue:e.defaultPage,passive:e.page===void 0}),y=c(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return ge({page:g,onPageChange(u){g.value=u},pageCount:y,siblingCount:n,disabled:a,showEdges:i}),(u,p)=>(d(),m(o(z),{as:u.as,"as-child":u.asChild},{default:f(()=>[h(u.$slots,"default",{page:o(g),pageCount:y.value})]),_:3},8,["as","as-child"]))}}),pe=C({__name:"PaginationFirst",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const l=t,e=S();w();const s=c(()=>e.page.value===1||e.disabled.value);return(n,a)=>(d(),m(o(z),q(l,{"aria-label":"First Page",type:n.as==="button"?"button":void 0,disabled:s.value,onClick:a[0]||(a[0]=i=>!s.value&&o(e).onPageChange(1))}),{default:f(()=>[h(n.$slots,"default",{},()=>[a[1]||(a[1]=B("First page"))])]),_:3},16,["type","disabled"]))}}),be=C({__name:"PaginationLast",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const l=t,e=S();w();const s=c(()=>e.page.value===e.pageCount.value||e.disabled.value);return(n,a)=>(d(),m(o(z),q(l,{"aria-label":"Last Page",type:n.as==="button"?"button":void 0,disabled:s.value,onClick:a[0]||(a[0]=i=>!s.value&&o(e).onPageChange(o(e).pageCount.value))}),{default:f(()=>[h(n.$slots,"default",{},()=>[a[1]||(a[1]=B("Last page"))])]),_:3},16,["type","disabled"]))}});function x(t,l){const e=l-t+1;return Array.from({length:e},(s,n)=>n+t)}function he(t){return t.map(l=>typeof l=="number"?{type:"page",value:l}:{type:"ellipsis"})}const V="ellipsis";function ye(t,l,e,s){const a=l,i=Math.max(t-e,1),g=Math.min(t+e,a);if(s){const u=Math.min(2*e+5,l)-2,p=i>3&&Math.abs(a-u-1+1)>2&&Math.abs(i-1)>2,v=g<a-2&&Math.abs(a-u)>2&&Math.abs(a-g)>2;if(!p&&v)return[...x(1,u),V,a];if(p&&!v){const b=x(a-u+1,a);return[1,V,...b]}if(p&&v){const b=x(i,g);return[1,V,...b,V,a]}return x(1,a)}else{const y=e*2+1;return l<y?x(1,a):t<=e+1?x(1,y):l-t<=e?x(l-y+1,a):x(i,g)}}const Pe=C({__name:"PaginationList",props:{asChild:{type:Boolean},as:{}},setup(t){const l=t;w();const e=S(),s=c(()=>he(ye(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(n,a)=>(d(),m(o(z),le(se(l)),{default:f(()=>[h(n.$slots,"default",{items:s.value})]),_:3},16))}}),Ce=C({__name:"PaginationListItem",props:{value:{},asChild:{type:Boolean},as:{default:"button"}},setup(t){const l=t;w();const e=S(),s=c(()=>e.page.value===l.value),n=c(()=>e.disabled.value);return(a,i)=>(d(),m(o(z),q(l,{"data-type":"page","aria-label":`Page ${a.value}`,"aria-current":s.value?"page":void 0,"data-selected":s.value?"true":void 0,disabled:n.value,type:a.as==="button"?"button":void 0,onClick:i[0]||(i[0]=g=>!n.value&&o(e).onPageChange(a.value))}),{default:f(()=>[h(a.$slots,"default",{},()=>[B(F(a.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),$e=C({__name:"PaginationNext",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const l=t;w();const e=S(),s=c(()=>e.page.value===e.pageCount.value||e.disabled.value);return(n,a)=>(d(),m(o(z),q(l,{"aria-label":"Next Page",type:n.as==="button"?"button":void 0,disabled:s.value,onClick:a[0]||(a[0]=i=>!s.value&&o(e).onPageChange(o(e).page.value+1))}),{default:f(()=>[h(n.$slots,"default",{},()=>[a[1]||(a[1]=B("Next page"))])]),_:3},16,["type","disabled"]))}}),xe=C({__name:"PaginationPrev",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const l=t;w();const e=S(),s=c(()=>e.page.value===1||e.disabled.value);return(n,a)=>(d(),m(o(z),q(l,{"aria-label":"Previous Page",type:n.as==="button"?"button":void 0,disabled:s.value,onClick:a[0]||(a[0]=i=>!s.value&&o(e).onPageChange(o(e).page.value-1))}),{default:f(()=>[h(n.$slots,"default",{},()=>[a[1]||(a[1]=B("Prev page"))])]),_:3},16,["type","disabled"]))}}),Ie={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},qe={__name:"Pagination",props:{as:{type:null,required:!1},firstIcon:{type:String,required:!1},prevIcon:{type:String,required:!1},nextIcon:{type:String,required:!1},lastIcon:{type:String,required:!1},ellipsisIcon:{type:String,required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(t,{emit:l}){const e=t,s=l,n=ne(),{dir:a}=oe(),i=ie(),g=ue(re(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),s),y=c(()=>e.firstIcon||(a.value==="rtl"?i.ui.icons.chevronDoubleRight:i.ui.icons.chevronDoubleLeft)),u=c(()=>e.prevIcon||(a.value==="rtl"?i.ui.icons.chevronRight:i.ui.icons.chevronLeft)),p=c(()=>e.nextIcon||(a.value==="rtl"?i.ui.icons.chevronLeft:i.ui.icons.chevronRight)),v=c(()=>e.lastIcon||(a.value==="rtl"?i.ui.icons.chevronDoubleLeft:i.ui.icons.chevronDoubleRight)),P=c(()=>{var b;return X({extend:X(Ie),...((b=i.ui)==null?void 0:b.pagination)||{}})()});return(b,Ee)=>{var j;return d(),m(o(me),q(o(g),{class:P.value.root({class:[(j=e.ui)==null?void 0:j.root,e.class]})}),{default:f(({page:R,pageCount:M})=>{var U;return[I(o(Pe),{class:k(P.value.list({class:(U=e.ui)==null?void 0:U.list}))},{default:f(({items:_})=>{var K,W,T,G;return[t.showControls||n.first?(d(),m(o(pe),{key:0,"as-child":"",class:k(P.value.first({class:(K=e.ui)==null?void 0:K.first}))},{default:f(()=>[h(b.$slots,"first",{},()=>{var r;return[I(L,{color:t.color,variant:t.variant,size:t.size,icon:y.value,to:(r=t.to)==null?void 0:r.call(t,1)},null,8,["color","variant","size","icon","to"])]})]),_:3},8,["class"])):E("",!0),t.showControls||n.prev?(d(),m(o(xe),{key:1,"as-child":"",class:k(P.value.prev({class:(W=e.ui)==null?void 0:W.prev}))},{default:f(()=>[h(b.$slots,"prev",{},()=>{var r;return[I(L,{color:t.color,variant:t.variant,size:t.size,icon:u.value,to:R>1?(r=t.to)==null?void 0:r.call(t,R-1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):E("",!0),(d(!0),N(A,null,Q(_,(r,D)=>{var H,J;return d(),N(A,null,[r.type==="page"?(d(),m(o(Ce),{key:D,"as-child":"",value:r.value,class:k(P.value.item({class:(H=e.ui)==null?void 0:H.item}))},{default:f(()=>[h(b.$slots,"item",q({ref_for:!0},{item:r,index:D,page:R,pageCount:M}),()=>{var O;return[I(L,{color:R===r.value?t.activeColor:t.color,variant:R===r.value?t.activeVariant:t.variant,size:t.size,label:String(r.value),ui:{label:P.value.label()},to:(O=t.to)==null?void 0:O.call(t,r.value),square:""},null,8,["color","variant","size","label","ui","to"])]})]),_:2},1032,["value","class"])):(d(),m(o(fe),{key:r.type,index:D,"as-child":"",class:k(P.value.ellipsis({class:(J=e.ui)==null?void 0:J.ellipsis}))},{default:f(()=>[h(b.$slots,"ellipsis",{},()=>[I(L,{color:t.color,variant:t.variant,size:t.size,icon:t.ellipsisIcon||o(i).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:2},1032,["index","class"]))],64)}),256)),t.showControls||n.next?(d(),m(o($e),{key:2,"as-child":"",class:k(P.value.next({class:(T=e.ui)==null?void 0:T.next}))},{default:f(()=>[h(b.$slots,"next",{},()=>{var r;return[I(L,{color:t.color,variant:t.variant,size:t.size,icon:p.value,to:R<M?(r=t.to)==null?void 0:r.call(t,R+1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):E("",!0),t.showControls||n.last?(d(),m(o(be),{key:3,"as-child":"",class:k(P.value.last({class:(G=e.ui)==null?void 0:G.last}))},{default:f(()=>[h(b.$slots,"last",{},()=>{var r;return[I(L,{color:t.color,variant:t.variant,size:t.size,icon:v.value,to:(r=t.to)==null?void 0:r.call(t,M)},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):E("",!0)]}),_:2},1032,["class"])]}),_:3},16,["class"])}}},we=({page:t,itemsPerPage:l,tags:e,type:s})=>{const n=c(()=>(e==null?void 0:e.value.join(","))??""),a="all",i=c(()=>(t.value-1)*l.value),g=Y(c(()=>`${a}_${n.value}_${s.value.join(",")}_${t.value}_${i.value}_${l.value}`),()=>{const u=Z(a).where("type","IN",s.value).order("date","DESC").skip(i.value).limit(l.value);return e!=null&&e.value.length&&u.orWhere(p=>{for(const v of e.value)p.where("tags","LIKE",`%${v}%`);return p}),u.all()},"$XLIBhn4c6V"),{data:y}=Y(c(()=>`total_${a}_${s.value.join(",")}_${n.value}`),()=>{const u=Z(a).where("type","IN",s.value);return e!=null&&e.value.length&&u.orWhere(p=>{for(const v of e.value)p.where("tags","LIKE",`%${v}%`);return p}),u.count()},{lazy:!0});return{articles:g,total:y,totalSkip:i}},ze={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4"},Re={class:"min-h-[100px] bg-gray-200"},ke=["src"],Be={class:"px-4 py-2"},Le={class:"text-lg font-bold mb-2"},Se=["href"],Ne={class:"text-sm text-gray-500 mb-2"},Ae=C({__name:"index",setup(t){const l=c(()=>["article"]),e=c(()=>3),s=de(),n=c(()=>s.query.page?Number(s.query.page):1),{articles:a,total:i,totalSkip:g}=we({page:n,itemsPerPage:e,type:l});return(y,u)=>{const p=qe;return d(),N("div",null,[u[1]||(u[1]=$("h1",{class:"text-2xl font-bold text-center mb-4"}," Test Page index ",-1)),$("div",ze,[(d(!0),N(A,null,Q(o(a).data.value,(v,P)=>(d(),N("div",{key:v.id,class:"border border-gray-200 rounded-md relative"},[$("div",Re,[$("img",{src:o(ve)(v.id),alt:"Article Image",class:"w-full h-auto mb-4"},null,8,ke)]),$("div",Be,[$("h2",Le,[$("a",{href:v.path,class:"text-blue-500 hover:text-blue-700 absolute top-0 left-0 w-full h-full"},null,8,Se),B(" "+F(v.title),1)]),$("p",Ne,F(v.description),1)])]))),128))]),I(p,{modelValue:o(n),"onUpdate:modelValue":u[0]||(u[0]=v=>ce(n)?n.value=v:null),total:o(i)??0,"items-per-page":o(e),"total-skip":o(g),to:v=>({path:"/",query:{page:v}})},null,8,["modelValue","total","items-per-page","total-skip","to"])])}}});export{Ae as default};
